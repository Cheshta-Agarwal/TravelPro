{% extends "administrator/base_admin.html" %}

{% block styles %}
{{ block.super }}
<style>
  .page-panel{max-width:760px;background:#fff;padding:20px;border-radius:10px;box-shadow:0 6px 16px rgba(2,6,23,0.06);margin:1.25rem auto}
  form .form-control, form .form-select{margin-top:.25rem}
  @media (max-width:767px){.page-panel{margin:.75rem;padding:14px}}
</style>
{% endblock %}

{% block content %}
  <div class="container"><div class="page-panel">
    <h4 class="mb-3">{% if form.instance.pk %}Edit Bus{% else %}Add Bus{% endif %}</h4>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} auto-dismiss">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form method="post">
      {% csrf_token %}
      <div class="row">
        {% for field in form %}
          <div class="mb-3 col-md-6">
            {{ field.label_tag }}
            {{ field }}
            {% if field.errors %}
              <div class="text-danger small">{{ field.errors }}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <div class="mt-3">
        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn btn-secondary" href="{% url 'administrator:bus_list' %}">Cancel</a>
      </div>
    </form>
    </div></div>
  </div>
{% endblock %}

{% block scripts %}
{{ block.super }}  <!-- This includes base page scripts -->
<script>
    // add bootstrap form classes to Django form fields for nicer look
    (function(){
      var form = document.querySelector('form');
      if(!form) return;
      form.querySelectorAll('input,select,textarea').forEach(function(el){
        if(!el.classList.contains('form-control') && el.type!='checkbox' && el.type!='radio' && el.tagName.toLowerCase()!=='button'){
          el.classList.add('form-control');
        }
        if(el.tagName.toLowerCase()==='select') el.classList.add('form-select');
      });
    })();
</script>
{% endblock %}